---
import { Picture } from "@astrojs/image/components";
import type { AstroComponentFactory } from "astro/dist/runtime/server";
import { getEmployee } from "../data";

export interface Props {
  email: string;
  tags: string[];
  Content: AstroComponentFactory;
}

const { email, Content, tags } = Astro.props;
const employee = await getEmployee(email);
---

{
  employee && (
    <div class="max-w-md mx-auto md:max-w-2xl min-w-0 break-words bg-white w-full mb-6 shadow-lg rounded-xl mt-20">
      <div class="px-8">
        <div class="flex flex-wrap justify-center">
          <div class="w-full flex justify-center">
            <div class="relative">
              <Picture
                src={employee.imageUrl}
                alt={employee.name}
                widths={[200]}
                aspectRatio="1:1"
                formats={["avif", "png"]}
                class="my-auto max-w-[12rem] min-w-[6rem]"
              />
            </div>
          </div>
        </div>
        <div class="text-center mt-16">
          <h3 class="text-2xl text-slate-700 font-bold leading-normal mb-1">
            {employee.name}
          </h3>
          <div class="text-xs mt-0 mb-2 text-slate-400 font-bold uppercase">
            <i class="fas fa-map-marker-alt mr-2 text-slate-400 opacity-75" />
            {employee.officeName}
          </div>
        </div>
        <div class="w-full text-center">
          <div class="flex justify-center pb-0">
            {tags.map(tag => (
              <div class="p-3 text-center">
                <span class="font-bold block uppercase tracking-wide text-slate-700">
                  {tag}
                </span>
              </div>
            ))}
          </div>
        </div>
        <div class="py-2 text-center">
          <div class="flex flex-wrap justify-center">
            <div class="w-full px-4">
              <p class="font-light leading-relaxed text-slate-600">
                <Content />
              </p>
              <a href={`mailto:${email}`}>
                <button class="mt-3 mb-3 group rounded-xl h-12 w-48 bg-green-500 font-bold text-white relative overflow-hidden">
                  Kontakt for mentortime
                  <div class="absolute duration-300 inset-0 w-full h-full transition-all scale-0 group-hover:scale-100 group-hover:bg-white/30 rounded-xl" />
                </button>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}
